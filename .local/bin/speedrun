#!/bin/bash
#alias stimer='shplit'

#function shplit() {
    FORMAT="%s.%2N"
    STARTTIME=$(date +${FORMAT})

    function format_duration {
        printf "%.2f" $1
    }

    function tick_time {
        DUR=$(format_duration $(bc <<< $(date +${FORMAT})-$STARTTIME))
        PRETTY_DUR=$(date +%T.%2N -u -d "@${DUR}")
        printf "\r%s " ${PRETTY_DUR}
    }

    function finish_up {
        tick_time
        echo
    }

    trap finish_up exit
    echo "End timing with ctrl-c."

    while true; do
        tick_time    
    done
#}
