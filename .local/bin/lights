#! /bin/sh

#-- lights --#
# Change rgb lights on my PC
# Dependencies:
#	- openrgb
#	- Execute `openrgb` with sudo privileges without password.
# ~ ADIGEN

# check if openrgb is installed
if ! command -v openrgb >/dev/null 2>&1; then
	echo "openrgb is not installed."
	exit
fi

color_choosen=${1:-`xrdb -query | grep '*color5' | awk '{print $2}' | cut -c 2-`}
# Very stupid, the noautocconnect flag works but kills the whole script.
rgb_command="sudo openrgb --noautoconnect"
#rgb_command="sudo openrgb"

# Doesn't work needs workaround below
${rgb_command} -c ${color_choosen} -m static & disown
#${rgb_command} -d 0 -c ${color_choosen} -m breathing
#${rgb_command} -d 1 -c ${color_choosen} -m breathing
# Works now for some reason, v0.7 onwards I guess.
#${rgb_command} -c ${color_choosen} -m breathing
